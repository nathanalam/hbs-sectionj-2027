---
import Layout from '../layouts/MainLayout.astro';
---

<Layout>
    <div class="bg-white p-6 md:p-8 rounded-lg shadow-lg">
        <h2 class="text-3xl font-bold text-gray-800 mb-4">Welcome to Section J!</h2>
        <p class="text-lg text-gray-700 mb-6">
            Welcome to the official hub for the best section at HBS. Here you'll find everything you need to stay connected, from upcoming events and section resources to our full class directory. We're excited for an incredible two years together!
        </p>

        <!-- Image Carousel -->
        <div id="image-carousel" class="relative rounded-lg overflow-hidden shadow-inner" style="height: 500px">
            <!-- Carousel Slides -->
            <div class="carousel-slide absolute top-0 left-0 w-full h-full opacity-100">
                <img src="/assets/carousel/alpaca.jpg" class="w-full h-full object-cover" alt="Alpaca farm event" />
            </div>
            <div class="carousel-slide absolute top-0 left-0 w-full h-full opacity-0">
                <img src="/assets/carousel/rainbow.jpg" class="w-full h-full object-cover" alt="Rainbow color shirts" />
            </div>
            <div class="carousel-slide absolute top-0 left-0 w-full h-full opacity-0">
                <img src="/assets/carousel/formal.jpg" class="w-full h-full object-cover" alt="Formal wear photo" />
            </div>
            <div class="carousel-slide absolute top-0 left-0 w-full h-full opacity-0">
                <img src="/assets/carousel/diwali.jpg" class="w-full h-full object-cover" alt="Diwali celebration" />
            </div>

            <!-- Prev/Next Buttons -->
            <button id="carousel-prev" class="absolute top-1/2 left-4 -translate-y-1/2 bg-black/30 text-white rounded-full p-2 hover:bg-black/50 transition z-10">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
            </button>
            <button id="carousel-next" class="absolute top-1/2 right-4 -translate-y-1/2 bg-black/30 text-white rounded-full p-2 hover:bg-black/50 transition z-10">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </button>

            <!-- Dot Indicators -->
            <div id="carousel-dots" class="absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2 z-10">
                <button class="carousel-dot w-3 h-3 bg-white/50 rounded-full transition"></button>
                <button class="carousel-dot w-3 h-3 bg-white/50 rounded-full transition"></button>
                <button class="carousel-dot w-3 h-3 bg-white/50 rounded-full transition"></button>
                <button class="carousel-dot w-3 h-3 bg-white/50 rounded-full transition"></button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const carousel = document.getElementById("image-carousel");
            if (carousel) {
                const slides = carousel.querySelectorAll(".carousel-slide");
                const dots = carousel.querySelectorAll(".carousel-dot");
                const prevButton = document.getElementById("carousel-prev");
                const nextButton = document.getElementById("carousel-next");

                let currentSlide = 0;
                const totalSlides = slides.length;
                let autoSlideInterval;

                function updateCarousel(newIndex) {
                    // Wrap around logic
                    if (newIndex < 0) {
                        newIndex = totalSlides - 1;
                    } else if (newIndex >= totalSlides) {
                        newIndex = 0;
                    }

                    // Hide current slide
                    slides[currentSlide].classList.add("opacity-0");
                    dots[currentSlide].classList.add("bg-white/50");
                    dots[currentSlide].classList.remove("bg-white");

                    // Show new slide
                    slides[newIndex].classList.remove("opacity-0");
                    dots[newIndex].classList.remove("bg-white/50");
                    dots[newIndex].classList.add("bg-white");

                    currentSlide = newIndex;
                }

                function nextSlide() {
                    updateCarousel(currentSlide + 1);
                }

                function prevSlide() {
                    updateCarousel(currentSlide - 1);
                }

                function startAutoSlide() {
                    // Start auto-slide every 5 seconds
                    autoSlideInterval = setInterval(nextSlide, 5000);
                }

                function stopAutoSlide() {
                    clearInterval(autoSlideInterval);
                }

                // Event Listeners for buttons
                nextButton.addEventListener("click", () => {
                    nextSlide();
                    stopAutoSlide();
                    startAutoSlide(); // Restart timer
                });

                prevButton.addEventListener("click", () => {
                    prevSlide();
                    stopAutoSlide();
                    startAutoSlide(); // Restart timer
                });

                // Event Listeners for dots
                dots.forEach((dot, index) => {
                    dot.addEventListener("click", () => {
                        updateCarousel(index);
                        stopAutoSlide();
                        startAutoSlide(); // Restart timer
                    });
                });

                // Initialize
                updateCarousel(0); // Set initial active slide/dot
                startAutoSlide();
            }
        });
    </script>
</Layout>
```
